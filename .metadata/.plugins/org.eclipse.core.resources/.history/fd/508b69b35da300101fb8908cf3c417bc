package dpDay2;

import java.util.Arrays;

public class SolutionLeetCode91 {
    public static int numDecodings(String s) {
//        return forceRecursion(s,0);
    	
    	
//    	int[] dp = new int[s.length()+1];
//    	Arrays.fill(dp, -1);
//    	return forceRecursionWithDp(s,0,dp);
    	
//    	int[] dp = new int[s.length()+1];
//    	return solve1(s,dp);
    	
    	return solve2(s);
    }
    public static int forceRecursion(String s,int cur) {
    	if(cur==s.length()) {
    		return 1;
    	}
    	int ans;
    	if(s.charAt(cur)=='0') {
    		ans=0;
    	}else {
    		ans=forceRecursion(s,cur+1);
    		if(cur+1<s.length()&&((s.charAt(cur)-'0')*10+s.charAt(cur+1)-'0')<=26) {
    			ans+=forceRecursion(s,cur+2);
    		}
    	}
    	return ans;
    }
    public static int forceRecursionWithDp(String s,int cur,int[] dp) {
    	if(cur==s.length()) {
    		return 1;
    	}
    	if(dp[cur]!=-1) {
    		return dp[cur];
    	}
    	int ans;
    	if(s.charAt(cur)=='0') {
    		ans=0;
    	}else {
    		ans=forceRecursionWithDp(s,cur+1,dp);
    		if(cur+1<s.length()&&((s.charAt(cur)-'0')*10+s.charAt(cur+1)-'0')<=26) {
    			ans+=forceRecursionWithDp(s,cur+2,dp);
    		}
    	}
    	dp[cur]=ans;
    	return ans;
    }
    public static int solve1(String s,int[] dp) {
    	dp[s.length()]=1;
    	for(int i=s.length()-1;i>=0;i--) {
    		if(s.charAt(i)=='0') {
    			dp[i]=0;
    		}else {
    			dp[i]=dp[i+1];
    			if(i+1<s.length()&&((s.charAt(i)-'0')*10)+(s.charAt(i+1)-'0')<=26) {
    				dp[i]+=dp[i+2];
    			}
    		}
    	}
    	return dp[0];
    }
    public static int solve2(String s) {
    	int next=1,nextnext=0;
    	for(int i=s.length()-1,cur;i>=0;i--) {
    		if(s.charAt(i)=='0') {
    			cur=0;
    		}else {
    			cur=next;
    			if(i+1<s.length()&&((s.charAt(i)-'0')*10)+(s.charAt(i+1)-'0')<=26) {
    				cur+=nextnext;
    			}
    		}
    		nextnext=next;
    		next=cur;
    	}
    	return next;
    }
}
